



# InkFlow âœ’ï¸ - åŸºäº Go çš„å†…å®¹åˆ†äº«ç¤¾åŒºå¹³å°

InkFlow æ˜¯ä¸€ä¸ªä½¿ç”¨ **Go + Gin + GORM** æ„å»ºçš„æ¨¡å—åŒ– IT å†…å®¹åˆ†äº«ç¤¾åŒºå¹³å°ï¼Œæ”¯æŒå†…å®¹åˆ›ä½œã€AI å®¡æ ¸ã€è¯„è®ºäº’åŠ¨ã€æ ‡ç­¾æœç´¢ã€é€šçŸ¥æé†’ç­‰å®Œæ•´çš„å†…å®¹åˆ†å‘é—­ç¯ã€‚é¡¹ç›®é‡‡ç”¨æ¨¡å—åŒ–æ¶æ„ï¼Œå…·å¤‡è‰¯å¥½çš„å¯æ‰©å±•æ€§å’Œé«˜å¹¶å‘æ”¯æŒèƒ½åŠ›ï¼Œé€‚åˆä½œä¸ºä¸­å‹åç«¯é¡¹ç›®å­¦ä¹ å‚è€ƒæˆ–äºŒæ¬¡å¼€å‘åŸºç¡€ã€‚

## âœ¨ é¡¹ç›®ç‰¹è‰²

- ğŸ§± **æ¨¡å—åŒ–è®¾è®¡**ï¼šå„ä¸šåŠ¡ç‹¬ç«‹å°è£…ï¼Œé¢†åŸŸæ¸…æ™°ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•
- ğŸ–Šï¸ **è‰ç¨¿å‘å¸ƒæµç¨‹**ï¼šè‰ç¨¿ç¼–è¾‘ã€å®¡æ ¸ã€å‘å¸ƒåˆ†ç¦»ï¼Œæ”¯æŒ AI å†…å®¹å®¡æ ¸
- ğŸ” **å…¨æ–‡æœç´¢ç³»ç»Ÿ**ï¼šæ¥å…¥ Meilisearchï¼Œæ”¯æŒ Kafka å¼‚æ­¥ç´¢å¼•åŒæ­¥
- ğŸ“Š **äº¤äº’ä¸çƒ­åº¦æ’å**ï¼šç‚¹èµã€æ”¶è—ã€æµè§ˆè¡Œä¸ºå®æ—¶è®°å½•ï¼Œçƒ­åº¦åŠ¨æ€æ’è¡Œ
- ğŸ”” **äº‹ä»¶é©±åŠ¨é€šçŸ¥**ï¼šåŸºäºäº‹ä»¶æ€»çº¿çš„ç³»ç»Ÿé€šçŸ¥æé†’æœºåˆ¶
- ğŸ§  **å®¡æ ¸æ¥å…¥ AI**ï¼šå¯¹ç”¨æˆ·ä¸Šä¼ å†…å®¹è‡ªåŠ¨è¿›è¡Œæ™ºèƒ½å®¡æ ¸è¿‡æ»¤

---
### ğŸ”— å‰ç«¯ä»“åº“åœ°å€

InkFlow é¡¹ç›®å‰åç«¯åˆ†ç¦»ï¼Œå‰ç«¯ä»£ç è¯·è®¿é—®ä»¥ä¸‹ä»“åº“ï¼š

ğŸ‘‰ **å‰ç«¯ä»“åº“åœ°å€**ï¼š [https://github.com/KNICEX/ink-flow-web](https://github.com/KNICEX/ink-flow-web)

è¯·æŒ‰ç…§å‰ç«¯é¡¹ç›®ä¸­çš„ `README.md` å¯åŠ¨æŒ‡å¼•è¿›è¡Œéƒ¨ç½²ã€‚

---

### ğŸ”— æ•°æ®åº“æµ‹è¯•æ•°æ®ç”Ÿæˆä»“åº“åœ°å€

InkFlow é¡¹ç›®å‰åç«¯æµ‹è¯•æ•°æ®åˆ†ç¦»ï¼Œæµ‹è¯•æ•°æ®ç”Ÿæˆä»£ç è¯·è®¿é—®ä»¥ä¸‹ä»“åº“ï¼š

ğŸ‘‰ **æµ‹è¯•æ•°æ®ç”Ÿæˆä»“åº“åœ°å€**ï¼š [https://github.com/KNICEX/InkFlow-TestData](https://github.com/KNICEX/InkFlow-TestData)

---

### ğŸ–¼ï¸ Web ç«¯ UI å±•ç¤º

InkFlow æä¾›ç®€æ´ç›´è§‚çš„å‰ç«¯ç•Œé¢ï¼Œæ”¯æŒå†…å®¹åˆ›ä½œã€å‘å¸ƒã€å®¡æ ¸ã€äº’åŠ¨ã€æœç´¢ç­‰å®Œæ•´ç¤¾åŒºåŠŸèƒ½ã€‚

ä»¥ä¸‹ä¸ºéƒ¨åˆ† UI æˆªå›¾ï¼š

#### ğŸ  é¦–é¡µ Feed æµ

![é¦–é¡µ Feed æµ](./docs/images/home_feed.png)

#### âœï¸ å‘å¸ƒå†…å®¹ç•Œé¢

![å‘å¸ƒå†…å®¹](./docs/images/post_editor.png)

#### ğŸ” æœç´¢ä¸æ ‡ç­¾æµè§ˆ

![å†…å®¹å…³ç³»](./docs/images/content_relation.png)

#### ğŸ“¬ é€šçŸ¥ä¸­å¿ƒä¸è¯„è®ºäº’åŠ¨

![ç³»ç»Ÿé€šçŸ¥](./docs/images/notification_system.png)

> ğŸ’¡ å¦‚æœä½ åœ¨æœ¬åœ°è¿è¡Œå‰ç«¯é¡¹ç›®ï¼Œå¯é€šè¿‡ `http://localhost:5173` æˆ–æŒ‡å®šç«¯å£è®¿é—® UI é¡µé¢ã€‚

---


## ğŸ§© åŠŸèƒ½æ¨¡å—

| æ¨¡å—          | æè¿°                                                         |
|---------------|--------------------------------------------------------------|
| `user`        | ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€èµ„æ–™ç»´æŠ¤ã€JWT é‰´æƒ                          |
| `ink`         | å†…å®¹åˆ›ä½œã€è‰ç¨¿ç®¡ç†ã€å‘å¸ƒå®¡æ ¸ã€Feed æ¨é€                    |
| `review`      | AI å®¡æ ¸æ¨¡å—ï¼Œå¼‚æ­¥å¤„ç†å†…å®¹åˆè§„æ€§å®¡æŸ¥                         |
| `comment`     | è¯„è®ºä¸å›å¤ã€åˆ†é¡µæŸ¥è¯¢ã€æ•æ„Ÿè¯è¿‡æ»¤                             |
| `relation`    | ç”¨æˆ·å…³æ³¨/ç²‰ä¸ã€å…³æ³¨äº‹ä»¶å‘é€                                  |
| `interactive` | ç‚¹èµã€æ”¶è—ã€æµè§ˆè¡Œä¸ºç»Ÿè®¡                                     |
| `ranking`     | å†…å®¹çƒ­åº¦è¯„åˆ†ä¸çƒ­é—¨æ¦œå•                                       |
| `search`      | Meilisearch æœç´¢æ¥å…¥ï¼ŒKafka æ¶ˆæ¯åŒæ­¥                         |
| `notification`| ç³»ç»Ÿé€šçŸ¥æ¨¡å—ï¼Œå¤„ç†å®¡æ ¸/å…³æ³¨/äº’åŠ¨ç­‰äº‹ä»¶æ¶ˆæ¯                 |
| `recommend`   | æ¨èæ¨¡å—ï¼ŒåŸºäº Gorse å®ç°ä¸ªæ€§åŒ–å†…å®¹æ¨è                      |
| `bff`         | Backend for Frontendï¼Œæ•´åˆæ‰€æœ‰æ¨¡å— APIï¼ŒåŸºäº Gin å®ç°       |


---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- è¯­è¨€ï¼šGo 1.21+
- Web æ¡†æ¶ï¼š[Gin](https://gin-gonic.com/)
- ORMï¼šGORM + PostgreSQL
- ç¼“å­˜ï¼šRedis
- æ¶ˆæ¯é˜Ÿåˆ—ï¼šKafka
- æœç´¢å¼•æ“ï¼š[Meilisearch](https://www.meilisearch.com/)
- æ¨èæœåŠ¡ï¼šGorse
- å®¡æ ¸æœåŠ¡ï¼šAI å®¡æ ¸å¹³å°ï¼ˆå¯å¯¹æ¥ google/Geminiï¼‰
- æ—¥å¿—ä¸é…ç½®ï¼šzap + viper

---

## ğŸ§¾ é¡¹ç›®ç»“æ„

```bash
inkflow/
â”œâ”€â”€ config/             # é…ç½®æ–‡ä»¶ï¼ˆæ•°æ®åº“ã€Redisã€Kafka ç­‰ï¼‰
â”œâ”€â”€ pkg/                # é€šç”¨å·¥å…·åº“ï¼ˆJWTã€ä¸­é—´ä»¶ã€æ—¥å¿—å°è£…ç­‰ï¼‰
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ bff/            # API å±‚ï¼ŒGin è·¯ç”±å…¥å£ï¼Œæ•´åˆæ‰€æœ‰æ¨¡å—æœåŠ¡
â”‚   â”œâ”€â”€ user/           # ç”¨æˆ·æ¨¡å—ï¼ˆå« service/domain/events/repoï¼‰
â”‚   â”œâ”€â”€ ink/            # å†…å®¹æ¨¡å—ï¼ˆè‰ç¨¿/å‘å¸ƒ/å®¡æ ¸/Feedæµï¼‰
â”‚   â”œâ”€â”€ review/         # å®¡æ ¸æ¨¡å—
â”‚   â”œâ”€â”€ comment/        # è¯„è®ºæ¨¡å—
â”‚   â”œâ”€â”€ search/         # æœç´¢æ¨¡å—ï¼ˆKafka åŒæ­¥ Meilisearchï¼‰
â”‚   â”œâ”€â”€ relation/       # å…³æ³¨æ¨¡å—
â”‚   â”œâ”€â”€ ranking/        # çƒ­åº¦æ’åæ¨¡å—
â”‚   â”œâ”€â”€ notification/   # é€šçŸ¥æ¨¡å—
â”‚   â””â”€â”€ interactive/    # ç‚¹èµæµè§ˆæ”¶è—æ¨¡å—
â”œâ”€â”€ main.go             # åº”ç”¨ç¨‹åºå…¥å£
```

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### âœ… ç¯å¢ƒä¾èµ–

- Go 1.21+
- Dockerï¼ˆç”¨äºå¯åŠ¨ PostgreSQLã€Redisã€Kafkaã€Meilisearchï¼‰
- Git

---

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/yourname/inkflow.git
cd inkflow
```
---

### 2. å¯åŠ¨ä¾èµ–æœåŠ¡ï¼ˆæ¨èï¼‰

ä½¿ç”¨å†…ç½® `docker-compose.yml` å¯åŠ¨ PostgreSQLã€Redisã€Kafkaã€Meilisearchï¼š

```bash
docker-compose up -d
```
---

### 3. é…ç½®æœåŠ¡

å¤åˆ¶é…ç½®æ¨¡æ¿å¹¶æ ¹æ®æœ¬åœ°ç¯å¢ƒä¿®æ”¹å‚æ•°ï¼š

```bash
cp config/config.yaml.example config/config.yaml
```
#### ğŸ› ï¸ ç¤ºä¾‹é…ç½®æ–‡ä»¶å†…å®¹ï¼ˆ`config.yaml`ï¼‰

```yaml
postgres:
  dsn: "host=localhost user=root password=root dbname=ink_flow port=15432"

redis:
  addr: 127.0.0.1:16379
  password: 123456

# å¯é€‰ï¼šå¦‚ä½¿ç”¨ ElasticSearchï¼ˆé»˜è®¤æœªå¯ç”¨ï¼‰
# es:
#   addr: 127.0.0.1:9200
#   sniff: false

meilisearch:
  addr: http://127.0.0.1:7700
  master_key: your_master_key

email:
  smtp:
    username: example@gmail.com
    password: password
    port: 587
    host: smtp.gmail.com
    from_name: InkFlow

llm:
  gemini:
    key:
      - key

otel:
  grpc:
    endpoint: localhost:4317
    insecure: true

kafka:
  addrs:
    - localhost:9094

file:
  cloudinary:
    key: your_key
    secret: your_secret
    cloud_name: your_cloud_name

temporal:
  addr: localhost:7233
  namespace: inkflow
  domain: default

gorse:
  addr: http://localhost:8088
  api_key: your_api_key

```



